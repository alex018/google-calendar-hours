(this["webpackJsonpgoogle-calendar-hours"]=this["webpackJsonpgoogle-calendar-hours"]||[]).push([[0],{1:function(e,a,t){e.exports={container:"MultiCalendarGraph_container__2G71p",calendarList:"MultiCalendarGraph_calendarList__3jRWa",calendarItem:"MultiCalendarGraph_calendarItem__Mk0B2",checkbox:"MultiCalendarGraph_checkbox__fsU-E",colorDot:"MultiCalendarGraph_colorDot__3_d2y",calendarName:"MultiCalendarGraph_calendarName__3nR4m",loadingBadge:"MultiCalendarGraph_loadingBadge__3pyf6",controls:"MultiCalendarGraph_controls__12q7U",controlGroup:"MultiCalendarGraph_controlGroup__1NsfH",controlLabel:"MultiCalendarGraph_controlLabel__13Uxl",toggle:"MultiCalendarGraph_toggle__db6Z1",toggleBtn:"MultiCalendarGraph_toggleBtn__1eNci",active:"MultiCalendarGraph_active__32ScX",chartArea:"MultiCalendarGraph_chartArea__3eHSZ",chartScroll:"MultiCalendarGraph_chartScroll__2GeQ4",tooltip:"MultiCalendarGraph_tooltip__3UB_9",scrollable:"MultiCalendarGraph_scrollable__2kvc2",chart:"MultiCalendarGraph_chart__16vJK",bar:"MultiCalendarGraph_bar__2K_Z1",line:"MultiCalendarGraph_line__BF4qH",dot:"MultiCalendarGraph_dot__2QBOC",axisLabel:"MultiCalendarGraph_axisLabel__3nRHM",barLabel:"MultiCalendarGraph_barLabel__3qVhH",pieCenter:"MultiCalendarGraph_pieCenter__Vmksl",pieCenterSub:"MultiCalendarGraph_pieCenterSub__tPuQY",legendLabel:"MultiCalendarGraph_legendLabel__3-Ve4",legendHours:"MultiCalendarGraph_legendHours__3JWVK",empty:"MultiCalendarGraph_empty__BB_rg",yearNav:"MultiCalendarGraph_yearNav__2g12i",yearNavBtn:"MultiCalendarGraph_yearNavBtn__1OfHP",yearLabel:"MultiCalendarGraph_yearLabel__2KRlj"}},14:function(e,a,t){e.exports={interface:"Interface_interface__1pJyE",loadingBar:"Interface_loadingBar__1Nzqm",spin:"Interface_spin__2LMD4",initialLoading:"Interface_initialLoading__3lQaJ",spinner:"Interface_spinner__285RU"}},26:function(e,a,t){e.exports=t(40)},3:function(e,a,t){e.exports={card:"AuthScreen_card__3YR00",hero:"AuthScreen_hero__2XAwP",title:"AuthScreen_title__38rD0",subtitle:"AuthScreen_subtitle__1M1yo",features:"AuthScreen_features__1NgF_",feature:"AuthScreen_feature__d_mRb",featureIcon:"AuthScreen_featureIcon__2tbRP",featureText:"AuthScreen_featureText__3Wcju",authSection:"AuthScreen_authSection__Vjgrz",authLabel:"AuthScreen_authLabel__l_Osn",authLink:"AuthScreen_authLink__2qdja",googleIcon:"AuthScreen_googleIcon__14q1_",privacy:"AuthScreen_privacy__1JsHl",privacyTitle:"AuthScreen_privacyTitle__3szyP",privacyText:"AuthScreen_privacyText__UT3lV",privacyBadge:"AuthScreen_privacyBadge__2zVRb"}},37:function(e,a,t){},40:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(16),l=t.n(c),o=t(4),i=(t(37),t(12)),s=t(8),u=Object(s.b)({name:"authentication",initialState:null,reducers:{}}),d=function(e){return e.authentication.accessToken},m=function(e){return Boolean(d(e))},p=u.reducer,f=t(3),h=t.n(f),v=function(){return r.a.createElement("div",{className:h.a.card},r.a.createElement("div",{className:h.a.hero},r.a.createElement("h2",{className:h.a.title},"Track your calendar hours"),r.a.createElement("p",{className:h.a.subtitle},"Connect your Google Calendar to see how you spend your time. Filter by day, week, month, year, or custom range.")),r.a.createElement("div",{className:h.a.features},r.a.createElement("div",{className:h.a.feature},r.a.createElement("div",{className:h.a.featureIcon,style:{background:"#eff6ff"}},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.a.createElement("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),r.a.createElement("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),r.a.createElement("line",{x1:"3",y1:"10",x2:"21",y2:"10"}))),r.a.createElement("span",{className:h.a.featureText},"Multi-calendar support")),r.a.createElement("div",{className:h.a.feature},r.a.createElement("div",{className:h.a.featureIcon,style:{background:"#f0fdf4"}},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#22c55e",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),r.a.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),r.a.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"14"}))),r.a.createElement("span",{className:h.a.featureText},"Visual charts and graphs")),r.a.createElement("div",{className:h.a.feature},r.a.createElement("div",{className:h.a.featureIcon,style:{background:"#fef3c7"}},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.a.createElement("polyline",{points:"12 6 12 12 16 14"}))),r.a.createElement("span",{className:h.a.featureText},"Flexible time ranges")),r.a.createElement("div",{className:h.a.feature},r.a.createElement("div",{className:h.a.featureIcon,style:{background:"#fae8ff"}},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#c026d3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}))),r.a.createElement("span",{className:h.a.featureText},"Private and secure"))),r.a.createElement("div",{className:h.a.authSection},r.a.createElement("p",{className:h.a.authLabel},"Connect to get started"),r.a.createElement("a",{href:function(){var e=Object(i.b)({client_id:"386288482739-qv303lmckdqrmksk8mqpihpfu4o8kc7k.apps.googleusercontent.com",redirect_uri:window.location.origin+window.location.pathname.replace(/\/$/,""),scope:"https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events.readonly",response_type:"token"});return"https://accounts.google.com/o/oauth2/auth?".concat(e)}(),"data-testid":"AuthLink",className:h.a.authLink},r.a.createElement("svg",{className:h.a.googleIcon,viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),r.a.createElement("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),r.a.createElement("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18A10.96 10.96 0 0 0 1 12c0 1.77.42 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),r.a.createElement("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})),"Sign in with Google")),r.a.createElement("div",{className:h.a.privacy},r.a.createElement("p",{className:h.a.privacyTitle},"Privacy"),r.a.createElement("p",{className:h.a.privacyText},"All data stays in your browser. No servers, no tracking. Your calendar data is fetched directly from Google and never stored externally. Authentication is cleared when you close the tab."),r.a.createElement("span",{className:h.a.privacyBadge},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.a.createElement("polyline",{points:"22 4 12 14.01 9 11.01"})),"Read-only access")))},y=t(5),_=t(11),b=t(15),g=t(2),E=t.n(g),k=t(7),x=t.n(k),N=t(10),O=function(){var e=Object(N.a)(x.a.mark((function e(a){var t,n,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.url,n=a.accessToken,r=a.params,e.next=3,fetch("".concat(t,"?").concat(Object(i.b)(Object(y.a)({access_token:n},r))));case 3:if(200===(c=e.sent).status){e.next=8;break}return sessionStorage.removeItem("accessToken"),window.location="/",e.abrupt("return",Promise.reject());case 8:return e.abrupt("return",c.json());case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(e){var a=e.accessToken;return O({url:"".concat("https://www.googleapis.com/calendar/v3/","users/me/calendarList"),accessToken:a})},M=function(){var e=Object(N.a)(x.a.mark((function e(a){var t,n,r,c,l,o,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.accessToken,n=a.calendarId,r=a.pageToken,c=a.acc,e.next=3,O({url:"".concat("https://www.googleapis.com/calendar/v3/","calendars/").concat(encodeURIComponent(n),"/events"),accessToken:t,params:{singleEvents:!0,maxResults:2500,pageToken:r,timeMax:E()().add(2,"year").toJSON()}});case 3:if(l=e.sent,o=l.items,i=l.nextPageToken){e.next=8;break}return e.abrupt("return",[].concat(Object(_.a)(c),Object(_.a)(o)));case 8:return e.abrupt("return",M({accessToken:t,calendarId:n,pageToken:i,acc:[].concat(Object(_.a)(c),Object(_.a)(o))}));case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),C=function(e){var a=e.accessToken,t=e.calendarId;return M({accessToken:a,calendarId:t,acc:[]})},w=Object(s.b)({name:"calendarEvents",initialState:{loadingCount:0,map:{}},reducers:{setCalendarEvents:function(e,a){var t=a.payload;e.map[t.calendarId]=t.events},setLoading:function(e,a){var t=a.payload;e.loadingCount+=t?1:-1}}}),j=w.actions,L=j.setCalendarEvents,A=j.setLoading,T=function(e){var a=e.calendarId;return function(){var e=Object(N.a)(x.a.mark((function e(t,n){var r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d(n()),e.prev=1,t(A(!0)),e.next=5,C({accessToken:r,calendarId:a});case 5:c=e.sent,t(L({calendarId:a,events:c.map((function(e){var a=e.id,t=e.summary,n=e.start,r=e.end;return n.dateTime?{id:a,summary:t,start:n.dateTime,end:r.dateTime}:null})).filter(Boolean)})),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:return e.prev=11,t(A(!1)),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,9,11,14]])})));return function(a,t){return e.apply(this,arguments)}}()},I=function(e){var a,t;return(null!==(a=null===(t=e.calendarEvents)||void 0===t?void 0:t.loadingCount)&&void 0!==a?a:0)>0},G=function(e){var a,t;return null!==(a=null===(t=e.calendarEvents)||void 0===t?void 0:t.map)&&void 0!==a?a:{}},B=w.reducer,R=Object(s.b)({name:"calendars",initialState:{list:null},reducers:{setCalendars:function(e,a){var t=a.payload;e.list=t}}}),W=R.actions.setCalendars,D=function(e){return e.calendars.list},P=R.reducer,Y=(t(25),t(23)),H=t.n(Y),F=(t(39),function(e){var a;try{a=JSON.parse(window.localStorage.getItem("config"))}catch(n){}var t=Object(y.a)(Object(y.a)({},a),e);window.localStorage.setItem("config",JSON.stringify(t))}),J=function(){try{return JSON.parse(window.localStorage.getItem("config"))}catch(e){}return null},K="month",V="custom",z="monday",U=function(e){return Math.round(100*e)/100};E.a.extend(H.a);var q=Object(s.b)({name:"viewState",initialState:null,reducers:{setSelectedCalendarId:function(e,a){var t=a.payload;e.selectedCalendarId=t},setRangeType:function(e,a){var t=a.payload;e.selectedRangeType=t},changeRange:function(e,a){var t=a.payload;"prev"===t?e.currentDatePointerStart=E()(e.currentDatePointerStart).subtract(1,e.selectedRangeType).toJSON():"next"===t&&(e.currentDatePointerStart=E()(e.currentDatePointerStart).add(1,e.selectedRangeType).toJSON())},resetRange:function(e){e.currentDatePointerStart=E()().startOf("day").toJSON()},setWeekStart:function(e,a){var t=a.payload;e.weekStart=t},setStart:function(e,a){var t=a.payload;e.currentDatePointerStart=t},setEnd:function(e,a){var t=a.payload;e.currentDatePointerEnd=t}}}),X=q.actions,Z=(X.changeRange,X.resetRange,q.actions),Q=(Z.setSelectedCalendarId,Z.setRangeType,Z.setWeekStart,Z.setStart,Z.setEnd,function(e,a,t){var n=0;return e.forEach((function(e){var r=e.start,c=e.end,l=new Date(r),o=new Date(c);o<=a||l>=t||(n+=((o>t?t:o)-(l<a?a:l))/1e3/60/60)})),U(n)}),$={eventsMap:null,year:null,result:{}},ee={eventsMap:null,result:{}},ae=function(e){var a=G(e);if(a===ee.eventsMap)return ee.result;var t=E()().year(),n=Array.from({length:5},(function(e,a){return t-4+a})),r={};return Object.keys(a).forEach((function(e){var t=a[e];t&&(r[e]=n.map((function(e){return{label:String(e),hours:Q(t,E()("".concat(e,"-01-01")).startOf("year").toDate(),E()("".concat(e,"-12-31")).endOf("year").add(1,"millisecond").toDate())}})))})),ee={eventsMap:a,result:r},r},te={eventsMap:null,year:null,result:{}},ne=q.reducer,re=t(1),ce=t.n(re),le={STACKED:"stacked",GROUPED:"grouped",LINE:"line",PIE:"pie"},oe={WEEKLY:"weekly",MONTHLY:"monthly",YEARLY:"yearly"},ie=28,se=16,ue=52,de=320-ie-40;function me(e){return e&&0!==e?4*Math.ceil(e/4):4}function pe(e,a,t,n,r,c){var l=function(e){return e*Math.PI/180},o=e+t*Math.cos(l(n)),i=a+t*Math.sin(l(n)),s=e+t*Math.cos(l(r)),u=a+t*Math.sin(l(r)),d=e+c*Math.cos(l(r)),m=a+c*Math.sin(l(r)),p=e+c*Math.cos(l(n)),f=a+c*Math.sin(l(n)),h=r-n>180?1:0;return["M ".concat(o," ").concat(i),"A ".concat(t," ").concat(t," 0 ").concat(h," 1 ").concat(s," ").concat(u),"L ".concat(d," ").concat(m),"A ".concat(c," ").concat(c," 0 ").concat(h," 0 ").concat(p," ").concat(f),"Z"].join(" ")}var fe=function(){var e=Object(o.c)(D),a=Object(o.c)(ae),t=Object(n.useState)((function(){var e,a=null===(e=J())||void 0===e?void 0:e.checkedCalendarIds;return Array.isArray(a)?new Set(a):null})),c=Object(b.a)(t,2),l=c[0],i=c[1],s=Object(n.useState)(le.STACKED),u=Object(b.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(oe.MONTHLY),f=Object(b.a)(p,2),h=f[0],v=f[1],g=Object(n.useState)(E()().year()),k=Object(b.a)(g,2),x=k[0],N=k[1],O=Object(n.useRef)(null),S=Object(n.useRef)(null),M=Object(n.useRef)(null),C=Object(n.useRef)(null),w=Object(n.useCallback)((function(e,a,t){var n=M.current;n&&(n.textContent=t,n.style.left="".concat(e,"px"),n.style.top="".concat(a,"px"),n.style.display="block")}),[]),j=Object(n.useCallback)((function(){var e=M.current;e&&(e.style.display="none")}),[]),L=Object(n.useCallback)((function(e){var a,t=e.target.closest("[data-tip]");if(t){var n=null===(a=S.current)||void 0===a?void 0:a.getBoundingClientRect();n&&w(e.clientX-n.left,e.clientY-n.top,t.dataset.tip)}else j()}),[w,j]),A=Object(n.useCallback)((function(e){var a,t=M.current;if(t&&"none"!==t.style.display){var n=null===(a=S.current)||void 0===a?void 0:a.getBoundingClientRect();n&&(t.style.left="".concat(e.clientX-n.left,"px"),t.style.top="".concat(e.clientY-n.top,"px"))}}),[]),T=Object(n.useCallback)((function(){j()}),[j]),I=Object(n.useCallback)((function(e){var a,t=e.target.closest("[data-tip]");if(t){clearTimeout(C.current);var n=e.touches[0],r=null===(a=S.current)||void 0===a?void 0:a.getBoundingClientRect();r&&(w(n.clientX-r.left,n.clientY-r.top,t.dataset.tip),C.current=setTimeout((function(){return j()}),2500))}}),[w,j]);Object(n.useEffect)((function(){return function(){return clearTimeout(C.current)}}),[]);var B=Object(o.c)((function(e){return function(e,a){var t=G(e),n=a||E()().year();if(t===$.eventsMap&&n===$.year)return $.result;var r={};return Object.keys(t).forEach((function(e){var a=t[e];a&&(r[e]=Array.from({length:12},(function(e,t){var r=E()("".concat(n,"-").concat(String(t+1).padStart(2,"0"),"-01"));return{label:r.format("MMM"),hours:Q(a,r.startOf("month").toDate(),r.endOf("month").add(1,"millisecond").toDate())}})))})),$={eventsMap:t,year:n,result:r},r}(e,x)})),R=Object(o.c)((function(e){return function(e,a){var t=G(e),n=a||E()().year();if(t===te.eventsMap&&n===te.year)return te.result;var r=E()("".concat(n,"-12-28")).isoWeek(),c={};return Object.keys(t).forEach((function(e){var a=t[e];a&&(c[e]=Array.from({length:r},(function(e,t){var r=t+1,c=E()().year(n).isoWeek(r).startOf("isoWeek").toDate(),l=E()().year(n).isoWeek(r).endOf("isoWeek").add(1,"millisecond").toDate();return{label:"W".concat(r),hours:Q(a,c,l)}})))})),te={eventsMap:t,year:n,result:c},c}(e,x)}));Object(n.useEffect)((function(){e&&null===l&&i(new Set(e.map((function(e){return e.id}))))}),[e,l]);var W=function(e,a,t,n){return e===oe.WEEKLY?a:e===oe.MONTHLY?t:n}(h,R,B,a),P=function(e){return null===l||l.has(e)},Y=(e||[]).filter((function(e){return P(e.id)&&W[e.id]})),H=(Y.length>0?W[Y[0].id]:[])||[],K=d===le.STACKED?function(){if(0===H.length)return 4;var e=0;return H.forEach((function(a,t){var n=Y.reduce((function(e,a){var n,r;return e+((null===(n=W[a.id])||void 0===n||null===(r=n[t])||void 0===r?void 0:r.hours)||0)}),0);n>e&&(e=n)})),me(e)}():function(){var e=0;return Y.forEach((function(a){(W[a.id]||[]).forEach((function(a){var t=a.hours;t>e&&(e=t)}))})),me(e)}(),V=Array.from({length:5},(function(e,a){return Math.round(K/4*a)})),z=h===oe.WEEKLY,U=H.length||1,q=z?Math.max(560,22*U+ue+se):560,X=q-ue-se,Z=X/Math.max(U,1),ee=Y.length>0?.8*Z/Y.length:.6*Z,ne=.6*Z,re=.2*Z,fe=function(){return V.map((function(e){var a=ie+de-e/K*de;return r.a.createElement("g",{key:e},r.a.createElement("line",{x1:ue,y1:a,x2:ue+X,y2:a,stroke:"#e2e8f0",strokeWidth:"1"}),r.a.createElement("text",{x:ue-6,y:a+4,textAnchor:"end",className:ce.a.axisLabel},e,"h"))}))},he=function(){return r.a.createElement("line",{x1:ue,y1:ie+de,x2:ue+X,y2:ie+de,stroke:"#cbd5e1",strokeWidth:"1"})},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return H.map((function(a,t){if(t%e!==0)return null;var n=ue+t*Z+Z/2;return r.a.createElement("text",{key:a.label,x:n,y:ie+de+16,textAnchor:"middle",className:ce.a.axisLabel},a.label)}))},ye=d===le.PIE,_e=h===oe.YEARLY,be=!ye&&!_e,ge=E()().year(),Ee=Math.max(240,22*Y.length+80);return r.a.createElement("div",{className:ce.a.container},r.a.createElement("div",{className:ce.a.calendarList},(e||[]).map((function(e){return r.a.createElement("label",{key:e.id,className:ce.a.calendarItem},r.a.createElement("input",{type:"checkbox",checked:P(e.id),onChange:function(){return a=e.id,void i((function(e){var t=new Set(e);return t.has(a)?t.delete(a):t.add(a),F({checkedCalendarIds:Object(_.a)(t)}),t}));var a},className:ce.a.checkbox}),r.a.createElement("span",{className:ce.a.colorDot,style:{background:e.color}}),r.a.createElement("span",{className:ce.a.calendarName,title:e.label},e.label),!W[e.id]&&r.a.createElement("span",{className:ce.a.loadingBadge},"loading\u2026"))}))),r.a.createElement("div",{className:ce.a.controls},r.a.createElement("div",{className:ce.a.controlGroup},r.a.createElement("span",{className:ce.a.controlLabel},"Chart"),r.a.createElement("div",{className:ce.a.toggle},[{key:le.STACKED,label:"Stacked"},{key:le.GROUPED,label:"Grouped"},{key:le.LINE,label:"Line"},{key:le.PIE,label:"Pie"}].map((function(e){var a=e.key,t=e.label;return r.a.createElement("button",{key:a,type:"button",className:"".concat(ce.a.toggleBtn," ").concat(d===a?ce.a.active:""),onClick:function(){return m(a)}},t)})))),r.a.createElement("div",{className:ce.a.controlGroup},r.a.createElement("span",{className:ce.a.controlLabel},"Period"),r.a.createElement("div",{className:ce.a.toggle},[{key:oe.WEEKLY,label:"Weekly"},{key:oe.MONTHLY,label:"Monthly"},{key:oe.YEARLY,label:"Yearly"}].map((function(e){var a=e.key,t=e.label;return r.a.createElement("button",{key:a,type:"button",className:"".concat(ce.a.toggleBtn," ").concat(h===a?ce.a.active:""),onClick:function(){return v(a)},disabled:ye},t)}))))),function(){if(0===Y.length)return r.a.createElement("div",{className:ce.a.empty},"Select at least one calendar to show the chart.");var e={onMouseOver:L,onMouseMove:A,onMouseLeave:T,onTouchStart:I};return ye?r.a.createElement("div",Object.assign({ref:S,className:ce.a.chartArea},e),r.a.createElement("svg",{className:ce.a.chart,viewBox:"0 0 ".concat(540," ").concat(Ee),"aria-label":"Pie chart: time per calendar"},function(){var e=Y.map((function(e){var a=(W[e.id]||[]).reduce((function(e,a){return e+a.hours}),0);return Object(y.a)(Object(y.a)({},e),{},{total:a})})),a=e.reduce((function(e,a){return e+a.total}),0);if(0===a)return r.a.createElement("text",{x:"280",y:"120",textAnchor:"middle",className:ce.a.axisLabel},"No data");var t=-90,n=e.filter((function(e){return e.total>0})).map((function(e){var n=e.total/a*360,r=Object(y.a)(Object(y.a)({},e),{},{startAngle:t,endAngle:t+n,pct:(e.total/a*100).toFixed(1)});return t+=n,r}));return r.a.createElement(r.a.Fragment,null,n.map((function(e){return r.a.createElement("path",{key:e.id,d:pe(180,110,90,e.startAngle,e.endAngle,48),fill:e.color,stroke:"#fff",strokeWidth:"2",className:ce.a.bar,"data-tip":"".concat(e.label,": ").concat(e.total.toFixed(1),"h (").concat(e.pct,"%)")})})),r.a.createElement("text",{x:180,y:104,textAnchor:"middle",className:ce.a.pieCenter},a.toFixed(0),"h"),r.a.createElement("text",{x:180,y:122,textAnchor:"middle",className:ce.a.pieCenterSub},"total"),n.map((function(e,a){var t=40+22*a;return r.a.createElement("g",{key:e.id},r.a.createElement("rect",{x:290,y:t,width:12,height:12,fill:e.color,rx:"2"}),r.a.createElement("text",{x:308,y:t+10,className:ce.a.legendLabel},e.label),r.a.createElement("text",{x:520,y:t+10,textAnchor:"end",className:ce.a.legendHours},e.total.toFixed(1),"h (",e.pct,"%)"))})))}()),r.a.createElement("div",{ref:M,className:ce.a.tooltip,style:{display:"none"}})):r.a.createElement("div",Object.assign({ref:S,className:ce.a.chartArea},e),r.a.createElement("div",{className:"".concat(ce.a.chartScroll," ").concat(z?ce.a.scrollable:""),ref:O},r.a.createElement("svg",{className:ce.a.chart,viewBox:"0 0 ".concat(q," ").concat(320),style:z?{minWidth:q}:{},"aria-label":"".concat(d," ").concat(h," hours chart")},d===le.STACKED&&function(){var e=z?4:1;return r.a.createElement(r.a.Fragment,null,fe(),he(),ve(e),H.map((function(e,a){var t=ue+a*Z+re,n=ie+de;return r.a.createElement("g",{key:e.label},Y.map((function(c){var l,o,i=(null===(l=W[c.id])||void 0===l||null===(o=l[a])||void 0===o?void 0:o.hours)||0;if(0===i)return null;var s=i/K*de,u=n-s;return n=u,r.a.createElement("rect",{key:c.id,x:t,y:u,width:ne,height:s,fill:c.color,rx:"3",className:ce.a.bar,"data-tip":"".concat(c.label," \u2014 ").concat(e.label,": ").concat(i,"h")})})))})))}(),d===le.GROUPED&&function(){var e=z?4:1;return r.a.createElement(r.a.Fragment,null,fe(),he(),ve(e),H.map((function(e,a){return r.a.createElement("g",{key:e.label},Y.map((function(t,n){var c,l,o=(null===(c=W[t.id])||void 0===c||null===(l=c[a])||void 0===l?void 0:l.hours)||0,i=Math.max(o/K*de,o>0?1:0),s=ue+a*Z+.1*Z+n*ee,u=ie+de-i;return r.a.createElement("rect",{key:t.id,x:s,y:u,width:Math.max(ee-1,1),height:i,fill:t.color,rx:"3",className:ce.a.bar,"data-tip":"".concat(t.label," \u2014 ").concat(e.label,": ").concat(o,"h")})})))})))}(),d===le.LINE&&function(){var e=z?4:1;return r.a.createElement(r.a.Fragment,null,fe(),he(),ve(e),Y.map((function(e){var a=W[e.id]||[],t=a.map((function(e,a){var t=ue+a*Z+Z/2,n=ie+de-e.hours/K*de;return"".concat(t,",").concat(n)})).join(" ");return r.a.createElement("g",{key:e.id},r.a.createElement("polyline",{points:t,fill:"none",stroke:e.color,strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round",className:ce.a.line}),a.map((function(a,t){if(0===a.hours)return null;var n=ue+t*Z+Z/2,c=ie+de-a.hours/K*de;return r.a.createElement("circle",{key:a.label,cx:n,cy:c,r:"3",fill:e.color,className:ce.a.dot,"data-tip":"".concat(e.label," \u2014 ").concat(a.label,": ").concat(a.hours,"h")})})))})))}())),r.a.createElement("div",{ref:M,className:ce.a.tooltip,style:{display:"none"}}))}(),be&&r.a.createElement("div",{className:ce.a.yearNav},r.a.createElement("button",{type:"button",className:ce.a.yearNavBtn,onClick:function(){return N((function(e){return e-1}))},"aria-label":"Previous year"},r.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("polyline",{points:"15 18 9 12 15 6"}))),r.a.createElement("span",{className:ce.a.yearLabel},x),r.a.createElement("button",{type:"button",className:ce.a.yearNavBtn,onClick:function(){return N((function(e){return e+1}))},disabled:x>=ge,"aria-label":"Next year"},r.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("polyline",{points:"9 18 15 12 9 6"})))))},he=t(14),ve=t.n(he),ye=function(){var e=Object(o.b)(),a=Object(o.c)(D),t=Object(o.c)(I);return Object(n.useEffect)((function(){a||e(function(){var e=Object(N.a)(x.a.mark((function e(a,t){var n,r,c,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d(t()),e.prev=1,e.next=4,S({accessToken:n});case 4:r=e.sent,c=r.items,l=c.map((function(e){return{id:e.id,label:e.summary,color:e.backgroundColor||"#4285f4"}})),a(W(l)),l.forEach((function(e){var t=e.id;a(T({calendarId:t}))})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(a,t){return e.apply(this,arguments)}}())})),a?r.a.createElement("div",{className:ve.a.interface},t&&r.a.createElement("div",{className:ve.a.loadingBar},"Loading calendar events"),r.a.createElement(fe,null)):r.a.createElement("div",{className:ve.a.initialLoading},r.a.createElement("div",{className:ve.a.spinner}),r.a.createElement("span",null,"Loading calendars"))},_e=t(9),be=t.n(_e),ge=function(){var e=Object(o.c)(m);return Object(n.useEffect)((function(){var e,a,t,n=Object(i.a)(null!==(e=null===(a=window.location)||void 0===a||null===(t=a.hash)||void 0===t?void 0:t.slice(1))&&void 0!==e?e:"");n.access_token&&(sessionStorage.setItem("accessToken",n.access_token),window.location=window.location.pathname.replace(/\/$/,"")||"/")}),[]),r.a.createElement("div",{className:be.a.appWrapper},r.a.createElement("div",{className:be.a.app},r.a.createElement("div",{className:be.a.sticky},r.a.createElement("div",{className:be.a.content},r.a.createElement("div",{className:be.a.header},r.a.createElement("div",{className:be.a.headerIcon},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{cx:"12",cy:"12",r:"9",stroke:"#fff",strokeWidth:"2"}),r.a.createElement("path",{d:"M12 7v5l3.5 3.5",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),r.a.createElement("h1",{className:be.a.headline},"Calendar Hours")),!e&&r.a.createElement(v,null),e&&r.a.createElement(ye,null)),r.a.createElement("footer",{className:be.a.footer},r.a.createElement("p",null,r.a.createElement("span",null,"Open source project \u2014 "),r.a.createElement("a",{href:"https://github.com/aronwoost/google-calendar-hours",target:"_blank",rel:"noreferrer"},"View on GitHub"))))))},Ee=t(24),ke=t.n(Ee);E.a.extend(ke.a);var xe=function(){try{return sessionStorage.getItem("accessToken")}catch(e){}return null},Ne=function(){var e,a,t,n=null!==(e=J())&&void 0!==e?e:{};return{selectedRangeType:null!==(a=n.selectedRangeType)&&void 0!==a?a:K,currentDatePointerStart:n.selectedRangeType===V?n.start:E()().startOf("day").toJSON(),currentDatePointerEnd:n.end,weekStart:null!==(t=n.weekStart)&&void 0!==t?t:z}},Oe=function(){return Object(s.a)({reducer:{authentication:p,calendars:P,viewState:ne,calendarEvents:B},preloadedState:{authentication:{accessToken:xe()},viewState:Ne()}})};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:Oe()},r.a.createElement(ge,null))),document.getElementById("root"))},9:function(e,a,t){e.exports={appWrapper:"App_appWrapper__3rnam",app:"App_app__1kX79",sticky:"App_sticky__1Ko52",content:"App_content__3La4L",header:"App_header__3ZZ1n",headerIcon:"App_headerIcon__3OhxF",headline:"App_headline__1z0fO",footer:"App_footer__29Fsv"}}},[[26,1,2]]]);
//# sourceMappingURL=main.b0d8b7b4.chunk.js.map