(this["webpackJsonpgoogle-calendar-hours"]=this["webpackJsonpgoogle-calendar-hours"]||[]).push([[0],{1:function(e,a,t){e.exports={container:"MultiCalendarGraph_container__2G71p",calendarList:"MultiCalendarGraph_calendarList__3jRWa",calendarItem:"MultiCalendarGraph_calendarItem__Mk0B2",checkbox:"MultiCalendarGraph_checkbox__fsU-E",colorDot:"MultiCalendarGraph_colorDot__3_d2y",calendarName:"MultiCalendarGraph_calendarName__3nR4m",loadingBadge:"MultiCalendarGraph_loadingBadge__3pyf6",controls:"MultiCalendarGraph_controls__12q7U",controlGroup:"MultiCalendarGraph_controlGroup__1NsfH",controlLabel:"MultiCalendarGraph_controlLabel__13Uxl",toggle:"MultiCalendarGraph_toggle__db6Z1",toggleBtn:"MultiCalendarGraph_toggleBtn__1eNci",active:"MultiCalendarGraph_active__32ScX",chartArea:"MultiCalendarGraph_chartArea__3eHSZ",chartScroll:"MultiCalendarGraph_chartScroll__2GeQ4",tooltip:"MultiCalendarGraph_tooltip__3UB_9",scrollable:"MultiCalendarGraph_scrollable__2kvc2",chart:"MultiCalendarGraph_chart__16vJK",bar:"MultiCalendarGraph_bar__2K_Z1",line:"MultiCalendarGraph_line__BF4qH",dot:"MultiCalendarGraph_dot__2QBOC",axisLabel:"MultiCalendarGraph_axisLabel__3nRHM",barLabel:"MultiCalendarGraph_barLabel__3qVhH",pieCenter:"MultiCalendarGraph_pieCenter__Vmksl",pieCenterSub:"MultiCalendarGraph_pieCenterSub__tPuQY",legendLabel:"MultiCalendarGraph_legendLabel__3-Ve4",legendHours:"MultiCalendarGraph_legendHours__3JWVK",empty:"MultiCalendarGraph_empty__BB_rg",yearNav:"MultiCalendarGraph_yearNav__2g12i",yearNavBtn:"MultiCalendarGraph_yearNavBtn__1OfHP",yearLabel:"MultiCalendarGraph_yearLabel__2KRlj"}},15:function(e,a,t){e.exports={interface:"Interface_interface__1pJyE",loadingBar:"Interface_loadingBar__1Nzqm",spin:"Interface_spin__2LMD4",initialLoading:"Interface_initialLoading__3lQaJ",spinner:"Interface_spinner__285RU"}},26:function(e,a,t){e.exports=t(40)},3:function(e,a,t){e.exports={card:"AuthScreen_card__3YR00",hero:"AuthScreen_hero__2XAwP",title:"AuthScreen_title__38rD0",subtitle:"AuthScreen_subtitle__1M1yo",features:"AuthScreen_features__1NgF_",feature:"AuthScreen_feature__d_mRb",featureIcon:"AuthScreen_featureIcon__2tbRP",featureText:"AuthScreen_featureText__3Wcju",authSection:"AuthScreen_authSection__Vjgrz",authLabel:"AuthScreen_authLabel__l_Osn",authLink:"AuthScreen_authLink__2qdja",googleIcon:"AuthScreen_googleIcon__14q1_",privacy:"AuthScreen_privacy__1JsHl",privacyTitle:"AuthScreen_privacyTitle__3szyP",privacyText:"AuthScreen_privacyText__UT3lV",privacyBadge:"AuthScreen_privacyBadge__2zVRb"}},37:function(e,a,t){},40:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(16),o=t.n(c),l=t(5),i=(t(37),t(12)),s=t(8),u=Object(s.b)({name:"authentication",initialState:null,reducers:{}}),d=function(e){return e.authentication.accessToken},m=function(e){return Boolean(d(e))},p=u.reducer,h=t(3),f=t.n(h),v=function(){return r.a.createElement("div",{className:f.a.card},r.a.createElement("div",{className:f.a.hero},r.a.createElement("h2",{className:f.a.title},"Track your calendar hours"),r.a.createElement("p",{className:f.a.subtitle},"Connect your Google Calendar to see how you spend your time. Filter by day, week, month, year, or custom range.")),r.a.createElement("div",{className:f.a.features},r.a.createElement("div",{className:f.a.feature},r.a.createElement("div",{className:f.a.featureIcon,style:{background:"#eff6ff"}},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#3b82f6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.a.createElement("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),r.a.createElement("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),r.a.createElement("line",{x1:"3",y1:"10",x2:"21",y2:"10"}))),r.a.createElement("span",{className:f.a.featureText},"Multi-calendar support")),r.a.createElement("div",{className:f.a.feature},r.a.createElement("div",{className:f.a.featureIcon,style:{background:"#f0fdf4"}},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#22c55e",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),r.a.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),r.a.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"14"}))),r.a.createElement("span",{className:f.a.featureText},"Visual charts and graphs")),r.a.createElement("div",{className:f.a.feature},r.a.createElement("div",{className:f.a.featureIcon,style:{background:"#fef3c7"}},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#f59e0b",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.a.createElement("polyline",{points:"12 6 12 12 16 14"}))),r.a.createElement("span",{className:f.a.featureText},"Flexible time ranges")),r.a.createElement("div",{className:f.a.feature},r.a.createElement("div",{className:f.a.featureIcon,style:{background:"#fae8ff"}},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#c026d3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}))),r.a.createElement("span",{className:f.a.featureText},"Private and secure"))),r.a.createElement("div",{className:f.a.authSection},r.a.createElement("p",{className:f.a.authLabel},"Connect to get started"),r.a.createElement("a",{href:function(){var e=Object(i.b)({client_id:"386288482739-qv303lmckdqrmksk8mqpihpfu4o8kc7k.apps.googleusercontent.com",redirect_uri:window.location.origin+window.location.pathname.replace(/\/$/,""),scope:"https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events.readonly",response_type:"token"});return"https://accounts.google.com/o/oauth2/auth?".concat(e)}(),"data-testid":"AuthLink",className:f.a.authLink},r.a.createElement("svg",{className:f.a.googleIcon,viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),r.a.createElement("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),r.a.createElement("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18A10.96 10.96 0 0 0 1 12c0 1.77.42 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),r.a.createElement("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})),"Sign in with Google")),r.a.createElement("div",{className:f.a.privacy},r.a.createElement("p",{className:f.a.privacyTitle},"Privacy"),r.a.createElement("p",{className:f.a.privacyText},"All data stays in your browser. No servers, no tracking. Your calendar data is fetched directly from Google and never stored externally. Authentication is cleared when you close the tab."),r.a.createElement("span",{className:f.a.privacyBadge},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.a.createElement("polyline",{points:"22 4 12 14.01 9 11.01"})),"Read-only access")))},_=t(11),E=t(4),y=t(13),g=t(2),b=t.n(g),k=t(7),x=t.n(k),N=t(10),M=function(){var e=Object(N.a)(x.a.mark((function e(a){var t,n,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.url,n=a.accessToken,r=a.params,e.next=3,fetch("".concat(t,"?").concat(Object(i.b)(Object(E.a)({access_token:n},r))));case 3:if(200===(c=e.sent).status){e.next=8;break}return sessionStorage.removeItem("accessToken"),window.location="/",e.abrupt("return",Promise.reject());case 8:return e.abrupt("return",c.json());case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(e){var a=e.accessToken;return M({url:"".concat("https://www.googleapis.com/calendar/v3/","users/me/calendarList"),accessToken:a})},O=function(){var e=Object(N.a)(x.a.mark((function e(a){var t,n,r,c,o,l,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.accessToken,n=a.calendarId,r=a.pageToken,c=a.acc,e.next=3,M({url:"".concat("https://www.googleapis.com/calendar/v3/","calendars/").concat(encodeURIComponent(n),"/events"),accessToken:t,params:{singleEvents:!0,maxResults:2500,pageToken:r,timeMax:b()().add(2,"year").toJSON()}});case 3:if(o=e.sent,l=o.items,i=o.nextPageToken){e.next=8;break}return e.abrupt("return",[].concat(Object(_.a)(c),Object(_.a)(l)));case 8:return e.abrupt("return",O({accessToken:t,calendarId:n,pageToken:i,acc:[].concat(Object(_.a)(c),Object(_.a)(l))}));case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),w=function(e){var a=e.accessToken,t=e.calendarId;return O({accessToken:a,calendarId:t,acc:[]})},L=Object(s.b)({name:"calendarEvents",initialState:{loadingCount:0,map:{}},reducers:{setCalendarEvents:function(e,a){var t=a.payload;e.map[t.calendarId]=t.events},setLoading:function(e,a){var t=a.payload;e.loadingCount+=t?1:-1}}}),C=L.actions,j=C.setCalendarEvents,T=C.setLoading,A=function(e){var a=e.calendarId;return function(){var e=Object(N.a)(x.a.mark((function e(t,n){var r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d(n()),e.prev=1,t(T(!0)),e.next=5,w({accessToken:r,calendarId:a});case 5:c=e.sent,t(j({calendarId:a,events:c.map((function(e){var a=e.id,t=e.summary,n=e.start,r=e.end;return n.dateTime?{id:a,summary:t,start:n.dateTime,end:r.dateTime}:null})).filter(Boolean)})),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:return e.prev=11,t(T(!1)),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,9,11,14]])})));return function(a,t){return e.apply(this,arguments)}}()},I=function(e){var a,t;return(null!==(a=null===(t=e.calendarEvents)||void 0===t?void 0:t.loadingCount)&&void 0!==a?a:0)>0},G=function(e){var a,t;return null!==(a=null===(t=e.calendarEvents)||void 0===t?void 0:t.map)&&void 0!==a?a:{}},B=L.reducer,R=Object(s.b)({name:"calendars",initialState:{list:null},reducers:{setCalendars:function(e,a){var t=a.payload;e.list=t}}}),W=R.actions.setCalendars,D=function(e){return e.calendars.list},P=R.reducer,Y=(t(25),t(23)),H=t.n(Y),F=(t(39),function(e){var a;try{a=JSON.parse(window.localStorage.getItem("config"))}catch(n){}var t=Object(E.a)(Object(E.a)({},a),e);window.localStorage.setItem("config",JSON.stringify(t))}),J=function(){try{return JSON.parse(window.localStorage.getItem("config"))}catch(e){}return null},K="month",V="custom",z="monday",U=function(e){return Math.round(100*e)/100};b.a.extend(H.a);var q=Object(s.b)({name:"viewState",initialState:null,reducers:{setSelectedCalendarId:function(e,a){var t=a.payload;e.selectedCalendarId=t},setRangeType:function(e,a){var t=a.payload;e.selectedRangeType=t},changeRange:function(e,a){var t=a.payload;"prev"===t?e.currentDatePointerStart=b()(e.currentDatePointerStart).subtract(1,e.selectedRangeType).toJSON():"next"===t&&(e.currentDatePointerStart=b()(e.currentDatePointerStart).add(1,e.selectedRangeType).toJSON())},resetRange:function(e){e.currentDatePointerStart=b()().startOf("day").toJSON()},setWeekStart:function(e,a){var t=a.payload;e.weekStart=t},setStart:function(e,a){var t=a.payload;e.currentDatePointerStart=t},setEnd:function(e,a){var t=a.payload;e.currentDatePointerEnd=t}}}),X=q.actions,Z=(X.changeRange,X.resetRange,q.actions),Q=(Z.setSelectedCalendarId,Z.setRangeType,Z.setWeekStart,Z.setStart,Z.setEnd,function(e,a,t){var n=0;return e.forEach((function(e){var r=e.start,c=e.end,o=new Date(r),l=new Date(c);l<=a||o>=t||(n+=((l>t?t:l)-(o<a?a:o))/1e3/60/60)})),U(n)}),$=function(e){var a=G(e),t=b()().year(),n=Array.from({length:5},(function(e,a){return t-4+a})),r={};return Object.keys(a).forEach((function(e){var t=a[e];t&&(r[e]=n.map((function(e){return{label:String(e),hours:Q(t,b()("".concat(e,"-01-01")).startOf("year").toDate(),b()("".concat(e,"-12-31")).endOf("year").add(1,"millisecond").toDate())}})))})),r},ee=q.reducer,ae=t(1),te=t.n(ae),ne={STACKED:"stacked",GROUPED:"grouped",LINE:"line",PIE:"pie"},re={WEEKLY:"weekly",MONTHLY:"monthly",YEARLY:"yearly"},ce=28,oe=16,le=52,ie=320-ce-40;function se(e){return e&&0!==e?4*Math.ceil(e/4):4}function ue(e,a,t,n,r,c){var o=function(e){return e*Math.PI/180},l=e+t*Math.cos(o(n)),i=a+t*Math.sin(o(n)),s=e+t*Math.cos(o(r)),u=a+t*Math.sin(o(r)),d=e+c*Math.cos(o(r)),m=a+c*Math.sin(o(r)),p=e+c*Math.cos(o(n)),h=a+c*Math.sin(o(n)),f=r-n>180?1:0;return["M ".concat(l," ").concat(i),"A ".concat(t," ").concat(t," 0 ").concat(f," 1 ").concat(s," ").concat(u),"L ".concat(d," ").concat(m),"A ".concat(c," ").concat(c," 0 ").concat(f," 0 ").concat(p," ").concat(h),"Z"].join(" ")}var de=function(){var e=Object(l.c)(D),a=Object(l.c)($),t=Object(n.useState)((function(){var e,a=null===(e=J())||void 0===e?void 0:e.checkedCalendarIds;return Array.isArray(a)?new Set(a):null})),c=Object(y.a)(t,2),o=c[0],i=c[1],s=Object(n.useState)(ne.STACKED),u=Object(y.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(re.MONTHLY),h=Object(y.a)(p,2),f=h[0],v=h[1],g=Object(n.useState)(b()().year()),k=Object(y.a)(g,2),x=k[0],N=k[1],M=Object(n.useRef)(null),S=Object(n.useRef)(null),O=Object(n.useState)(null),w=Object(y.a)(O,2),L=w[0],C=w[1],j=Object(n.useRef)(null),T=function(e){return{onMouseEnter:function(a){var t,n=null===(t=S.current)||void 0===t?void 0:t.getBoundingClientRect();n&&C({x:a.clientX-n.left,y:a.clientY-n.top,text:e})},onMouseMove:function(e){var a,t=null===(a=S.current)||void 0===a?void 0:a.getBoundingClientRect();t&&C((function(a){return a?Object(E.a)(Object(E.a)({},a),{},{x:e.clientX-t.left,y:e.clientY-t.top}):a}))},onMouseLeave:function(){C(null)},onTouchStart:function(a){var t;clearTimeout(j.current);var n=a.touches[0],r=null===(t=S.current)||void 0===t?void 0:t.getBoundingClientRect();r&&(C({x:n.clientX-r.left,y:n.clientY-r.top,text:e}),j.current=setTimeout((function(){return C(null)}),2500))}}},A=Object(l.c)((function(e){return function(e,a){var t=G(e),n=a||b()().year(),r={};return Object.keys(t).forEach((function(e){var a=t[e];a&&(r[e]=Array.from({length:12},(function(e,t){var r=b()("".concat(n,"-").concat(String(t+1).padStart(2,"0"),"-01"));return{label:r.format("MMM"),hours:Q(a,r.startOf("month").toDate(),r.endOf("month").add(1,"millisecond").toDate())}})))})),r}(e,x)})),I=Object(l.c)((function(e){return function(e,a){var t=G(e),n=a||b()().year(),r=b()("".concat(n,"-12-28")).isoWeek(),c={};return Object.keys(t).forEach((function(e){var a=t[e];a&&(c[e]=Array.from({length:r},(function(e,t){var r=t+1,c=b()().year(n).isoWeek(r).startOf("isoWeek").toDate(),o=b()().year(n).isoWeek(r).endOf("isoWeek").add(1,"millisecond").toDate();return{label:"W".concat(r),hours:Q(a,c,o)}})))})),c}(e,x)}));Object(n.useEffect)((function(){e&&null===o&&i(new Set(e.map((function(e){return e.id}))))}),[e,o]);var B=function(e,a,t,n){return e===re.WEEKLY?a:e===re.MONTHLY?t:n}(f,I,A,a),R=function(e){return null===o||o.has(e)},W=(e||[]).filter((function(e){return R(e.id)&&B[e.id]})),P=(W.length>0?B[W[0].id]:[])||[],Y=d===ne.STACKED?function(){if(0===P.length)return 4;var e=0;return P.forEach((function(a,t){var n=W.reduce((function(e,a){var n,r;return e+((null===(n=B[a.id])||void 0===n||null===(r=n[t])||void 0===r?void 0:r.hours)||0)}),0);n>e&&(e=n)})),se(e)}():function(){var e=0;return W.forEach((function(a){(B[a.id]||[]).forEach((function(a){var t=a.hours;t>e&&(e=t)}))})),se(e)}(),H=Array.from({length:5},(function(e,a){return Math.round(Y/4*a)})),K=f===re.WEEKLY,V=P.length||1,z=K?Math.max(560,22*V+le+oe):560,U=z-le-oe,q=U/Math.max(V,1),X=W.length>0?.8*q/W.length:.6*q,Z=.6*q,ee=.2*q,ae=function(){return H.map((function(e){var a=ce+ie-e/Y*ie;return r.a.createElement("g",{key:e},r.a.createElement("line",{x1:le,y1:a,x2:le+U,y2:a,stroke:"#e2e8f0",strokeWidth:"1"}),r.a.createElement("text",{x:le-6,y:a+4,textAnchor:"end",className:te.a.axisLabel},e,"h"))}))},de=function(){return r.a.createElement("line",{x1:le,y1:ce+ie,x2:le+U,y2:ce+ie,stroke:"#cbd5e1",strokeWidth:"1"})},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return P.map((function(a,t){if(t%e!==0)return null;var n=le+t*q+q/2;return r.a.createElement("text",{key:a.label,x:n,y:ce+ie+16,textAnchor:"middle",className:te.a.axisLabel},a.label)}))},pe=d===ne.PIE,he=f===re.YEARLY,fe=!pe&&!he,ve=b()().year(),_e=Math.max(240,22*W.length+80);return r.a.createElement("div",{className:te.a.container},r.a.createElement("div",{className:te.a.calendarList},(e||[]).map((function(e){return r.a.createElement("label",{key:e.id,className:te.a.calendarItem},r.a.createElement("input",{type:"checkbox",checked:R(e.id),onChange:function(){return a=e.id,void i((function(e){var t=new Set(e);return t.has(a)?t.delete(a):t.add(a),F({checkedCalendarIds:Object(_.a)(t)}),t}));var a},className:te.a.checkbox}),r.a.createElement("span",{className:te.a.colorDot,style:{background:e.color}}),r.a.createElement("span",{className:te.a.calendarName,title:e.label},e.label),!B[e.id]&&r.a.createElement("span",{className:te.a.loadingBadge},"loading\u2026"))}))),r.a.createElement("div",{className:te.a.controls},r.a.createElement("div",{className:te.a.controlGroup},r.a.createElement("span",{className:te.a.controlLabel},"Chart"),r.a.createElement("div",{className:te.a.toggle},[{key:ne.STACKED,label:"Stacked"},{key:ne.GROUPED,label:"Grouped"},{key:ne.LINE,label:"Line"},{key:ne.PIE,label:"Pie"}].map((function(e){var a=e.key,t=e.label;return r.a.createElement("button",{key:a,type:"button",className:"".concat(te.a.toggleBtn," ").concat(d===a?te.a.active:""),onClick:function(){return m(a)}},t)})))),r.a.createElement("div",{className:te.a.controlGroup},r.a.createElement("span",{className:te.a.controlLabel},"Period"),r.a.createElement("div",{className:te.a.toggle},[{key:re.WEEKLY,label:"Weekly"},{key:re.MONTHLY,label:"Monthly"},{key:re.YEARLY,label:"Yearly"}].map((function(e){var a=e.key,t=e.label;return r.a.createElement("button",{key:a,type:"button",className:"".concat(te.a.toggleBtn," ").concat(f===a?te.a.active:""),onClick:function(){return v(a)},disabled:pe},t)}))))),0===W.length?r.a.createElement("div",{className:te.a.empty},"Select at least one calendar to show the chart."):pe?r.a.createElement("div",{ref:S,className:te.a.chartArea},r.a.createElement("svg",{className:te.a.chart,viewBox:"0 0 ".concat(540," ").concat(_e),"aria-label":"Pie chart: time per calendar"},function(){var e=W.map((function(e){var a=(B[e.id]||[]).reduce((function(e,a){return e+a.hours}),0);return Object(E.a)(Object(E.a)({},e),{},{total:a})})),a=e.reduce((function(e,a){return e+a.total}),0);if(0===a)return r.a.createElement("text",{x:"280",y:"120",textAnchor:"middle",className:te.a.axisLabel},"No data");var t=-90,n=e.filter((function(e){return e.total>0})).map((function(e){var n=e.total/a*360,r=Object(E.a)(Object(E.a)({},e),{},{startAngle:t,endAngle:t+n,pct:(e.total/a*100).toFixed(1)});return t+=n,r}));return r.a.createElement(r.a.Fragment,null,n.map((function(e){var a=T("".concat(e.label,": ").concat(e.total.toFixed(1),"h (").concat(e.pct,"%)"));return r.a.createElement("path",{key:e.id,d:ue(180,110,90,e.startAngle,e.endAngle,48),fill:e.color,stroke:"#fff",strokeWidth:"2",className:te.a.bar,onMouseEnter:a.onMouseEnter,onMouseMove:a.onMouseMove,onMouseLeave:a.onMouseLeave,onTouchStart:a.onTouchStart})})),r.a.createElement("text",{x:180,y:104,textAnchor:"middle",className:te.a.pieCenter},a.toFixed(0),"h"),r.a.createElement("text",{x:180,y:122,textAnchor:"middle",className:te.a.pieCenterSub},"total"),n.map((function(e,a){var t=40+22*a;return r.a.createElement("g",{key:e.id},r.a.createElement("rect",{x:290,y:t,width:12,height:12,fill:e.color,rx:"2"}),r.a.createElement("text",{x:308,y:t+10,className:te.a.legendLabel},e.label),r.a.createElement("text",{x:520,y:t+10,textAnchor:"end",className:te.a.legendHours},e.total.toFixed(1),"h (",e.pct,"%)"))})))}()),L&&r.a.createElement("div",{className:te.a.tooltip,style:{left:L.x,top:L.y}},L.text)):r.a.createElement("div",{ref:S,className:te.a.chartArea},r.a.createElement("div",{className:"".concat(te.a.chartScroll," ").concat(K?te.a.scrollable:""),ref:M},r.a.createElement("svg",{className:te.a.chart,viewBox:"0 0 ".concat(z," ").concat(320),style:K?{minWidth:z}:{},"aria-label":"".concat(d," ").concat(f," hours chart")},d===ne.STACKED&&function(){var e=K?4:1;return r.a.createElement(r.a.Fragment,null,ae(),de(),me(e),P.map((function(e,a){var t=le+a*q+ee,n=ce+ie;return r.a.createElement("g",{key:e.label},W.map((function(c){var o,l,i=(null===(o=B[c.id])||void 0===o||null===(l=o[a])||void 0===l?void 0:l.hours)||0;if(0===i)return null;var s=i/Y*ie,u=n-s;n=u;var d=T("".concat(c.label," \u2014 ").concat(e.label,": ").concat(i,"h"));return r.a.createElement("rect",{key:c.id,x:t,y:u,width:Z,height:s,fill:c.color,rx:"3",className:te.a.bar,onMouseEnter:d.onMouseEnter,onMouseMove:d.onMouseMove,onMouseLeave:d.onMouseLeave,onTouchStart:d.onTouchStart})})))})))}(),d===ne.GROUPED&&function(){var e=K?4:1;return r.a.createElement(r.a.Fragment,null,ae(),de(),me(e),P.map((function(e,a){return r.a.createElement("g",{key:e.label},W.map((function(t,n){var c,o,l=(null===(c=B[t.id])||void 0===c||null===(o=c[a])||void 0===o?void 0:o.hours)||0,i=Math.max(l/Y*ie,l>0?1:0),s=le+a*q+.1*q+n*X,u=ce+ie-i,d=T("".concat(t.label," \u2014 ").concat(e.label,": ").concat(l,"h"));return r.a.createElement("rect",{key:t.id,x:s,y:u,width:Math.max(X-1,1),height:i,fill:t.color,rx:"3",className:te.a.bar,onMouseEnter:d.onMouseEnter,onMouseMove:d.onMouseMove,onMouseLeave:d.onMouseLeave,onTouchStart:d.onTouchStart})})))})))}(),d===ne.LINE&&function(){var e=K?4:1;return r.a.createElement(r.a.Fragment,null,ae(),de(),me(e),W.map((function(e){var a=B[e.id]||[],t=a.map((function(e,a){var t=le+a*q+q/2,n=ce+ie-e.hours/Y*ie;return"".concat(t,",").concat(n)})).join(" ");return r.a.createElement("g",{key:e.id},r.a.createElement("polyline",{points:t,fill:"none",stroke:e.color,strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round",className:te.a.line}),a.map((function(t){if(0===t.hours)return null;var n=le+a.indexOf(t)*q+q/2,c=ce+ie-t.hours/Y*ie,o=T("".concat(e.label," \u2014 ").concat(t.label,": ").concat(t.hours,"h"));return r.a.createElement("circle",{key:t.label,cx:n,cy:c,r:"3",fill:e.color,className:te.a.dot,onMouseEnter:o.onMouseEnter,onMouseMove:o.onMouseMove,onMouseLeave:o.onMouseLeave,onTouchStart:o.onTouchStart})})))})))}())),L&&r.a.createElement("div",{className:te.a.tooltip,style:{left:L.x,top:L.y}},L.text)),fe&&r.a.createElement("div",{className:te.a.yearNav},r.a.createElement("button",{type:"button",className:te.a.yearNavBtn,onClick:function(){return N((function(e){return e-1}))},"aria-label":"Previous year"},r.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("polyline",{points:"15 18 9 12 15 6"}))),r.a.createElement("span",{className:te.a.yearLabel},x),r.a.createElement("button",{type:"button",className:te.a.yearNavBtn,onClick:function(){return N((function(e){return e+1}))},disabled:x>=ve,"aria-label":"Next year"},r.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("polyline",{points:"9 18 15 12 9 6"})))))},me=t(15),pe=t.n(me),he=function(){var e=Object(l.b)(),a=Object(l.c)(D),t=Object(l.c)(I);return Object(n.useEffect)((function(){a||e(function(){var e=Object(N.a)(x.a.mark((function e(a,t){var n,r,c,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d(t()),e.prev=1,e.next=4,S({accessToken:n});case 4:r=e.sent,c=r.items,o=c.map((function(e){return{id:e.id,label:e.summary,color:e.backgroundColor||"#4285f4"}})),a(W(o)),o.forEach((function(e){var t=e.id;a(A({calendarId:t}))})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(a,t){return e.apply(this,arguments)}}())})),a?r.a.createElement("div",{className:pe.a.interface},t&&r.a.createElement("div",{className:pe.a.loadingBar},"Loading calendar events"),r.a.createElement(de,null)):r.a.createElement("div",{className:pe.a.initialLoading},r.a.createElement("div",{className:pe.a.spinner}),r.a.createElement("span",null,"Loading calendars"))},fe=t(9),ve=t.n(fe),_e=function(){var e=Object(l.c)(m);return Object(n.useEffect)((function(){var e,a,t,n=Object(i.a)(null!==(e=null===(a=window.location)||void 0===a||null===(t=a.hash)||void 0===t?void 0:t.slice(1))&&void 0!==e?e:"");n.access_token&&(sessionStorage.setItem("accessToken",n.access_token),window.location=window.location.pathname.replace(/\/$/,"")||"/")}),[]),r.a.createElement("div",{className:ve.a.appWrapper},r.a.createElement("div",{className:ve.a.app},r.a.createElement("div",{className:ve.a.sticky},r.a.createElement("div",{className:ve.a.content},r.a.createElement("div",{className:ve.a.header},r.a.createElement("div",{className:ve.a.headerIcon},r.a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{cx:"12",cy:"12",r:"9",stroke:"#fff",strokeWidth:"2"}),r.a.createElement("path",{d:"M12 7v5l3.5 3.5",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),r.a.createElement("h1",{className:ve.a.headline},"Calendar Hours")),!e&&r.a.createElement(v,null),e&&r.a.createElement(he,null)),r.a.createElement("footer",{className:ve.a.footer},r.a.createElement("p",null,r.a.createElement("span",null,"Open source project \u2014 "),r.a.createElement("a",{href:"https://github.com/aronwoost/google-calendar-hours",target:"_blank",rel:"noreferrer"},"View on GitHub"))))))},Ee=t(24),ye=t.n(Ee);b.a.extend(ye.a);var ge=function(){try{return sessionStorage.getItem("accessToken")}catch(e){}return null},be=function(){var e,a,t,n=null!==(e=J())&&void 0!==e?e:{};return{selectedRangeType:null!==(a=n.selectedRangeType)&&void 0!==a?a:K,currentDatePointerStart:n.selectedRangeType===V?n.start:b()().startOf("day").toJSON(),currentDatePointerEnd:n.end,weekStart:null!==(t=n.weekStart)&&void 0!==t?t:z}},ke=function(){return Object(s.a)({reducer:{authentication:p,calendars:P,viewState:ee,calendarEvents:B},preloadedState:{authentication:{accessToken:ge()},viewState:be()}})};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:ke()},r.a.createElement(_e,null))),document.getElementById("root"))},9:function(e,a,t){e.exports={appWrapper:"App_appWrapper__3rnam",app:"App_app__1kX79",sticky:"App_sticky__1Ko52",content:"App_content__3La4L",header:"App_header__3ZZ1n",headerIcon:"App_headerIcon__3OhxF",headline:"App_headline__1z0fO",footer:"App_footer__29Fsv"}}},[[26,1,2]]]);
//# sourceMappingURL=main.f65742af.chunk.js.map